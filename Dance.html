<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compacte Oneindige Carrousel</title>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #dff5e1; /* lichtgroen */
            touch-action: none;
        }

        /* DVD container */
        #dvd-container {
            position: absolute;
            width: 260px;
            height: 260px;
            will-change: transform;
        }

        /* Schaal iets kleiner op mobiel */
        @media (max-width: 600px) {
            #dvd-container {
                width: 220px;
                height: 220px;
            }
        }

        #circle {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .item {
            position: absolute;
            width: 100px;
            height: 65px;
            top: 50%;
            left: 50%;
        }

        .item img,
        .item video {
            width: 150%;
            height: 150%;
            object-fit: cover;
            display: block;
            border-radius: 0px;
        }
    </style>
</head>

<body>

<div id="dvd-container">
    <div id="circle"></div>
</div>

<script>
    const circle = document.getElementById("circle");
    const container = document.getElementById("dvd-container");

    const itemsData = [
        { type: "image", src: "images/dans2.JPG" },
        { type: "video", src: "images/pigeon.mp4" },
        { type: "image", src: "images/dans3.JPG" },
        { type: "image", src: "images/dans1.JPG" },
        { type: "image", src: "images/dans4.JPG" }
    ];

    let radius = 110;
    const duration = 20000;
    const speed = (Math.PI * 2) / duration;
    const items = [];

    function updateRadius() {
        radius = window.innerWidth < 600 ? 90 : 110;
    }
    updateRadius();
    window.addEventListener("resize", updateRadius);

    /* Items maken */
    itemsData.forEach((data, i) => {
        const el = document.createElement("div");
        el.className = "item";

        if (data.type === "image") {
            const img = document.createElement("img");
            img.src = data.src;
            el.appendChild(img);
        } else {
            const video = document.createElement("video");
            video.src = data.src;
            video.autoplay = true;
            video.loop = true;
            video.muted = true;
            video.playsInline = true;
            el.appendChild(video);
        }

        circle.appendChild(el);

        items.push({
            el,
            angle: (Math.PI * 2 / itemsData.length) * i
        });
    });

    /* Carrousel animatie */
    let lastTime = performance.now();

    function animateCarousel(time) {
        const delta = time - lastTime;
        lastTime = time;

        items.forEach(item => {
            item.angle += speed * delta;

            const x = Math.cos(item.angle) * radius;
            const y = Math.sin(item.angle) * radius;

            item.el.style.transform =
                `translate(${x}px, ${y}px) translate(-50%, -50%)`;
        });

        requestAnimationFrame(animateCarousel);
    }

    requestAnimationFrame(animateCarousel);

    /* DVD-beweging (mobiel-proof) */
    let x = 60, y = 60;
    let vx = 1.1, vy = 1.0;

    function moveDVD() {
        const w = window.innerWidth;
        const h = window.innerHeight;
        const rect = container.getBoundingClientRect();

        x += vx;
        y += vy;

        if (x <= 0 || x + rect.width >= w) vx *= -1;
        if (y <= 0 || y + rect.height >= h) vy *= -1;

        container.style.transform = `translate3d(${x}px, ${y}px, 0)`;
        requestAnimationFrame(moveDVD);
    }

    moveDVD();
</script>

</body>
</html>
